!function(t){function e(e,i){this.element=e,this.$el=t(e),this.settings=t.extend({},r,i),this.$container=t(this.settings.container),this.settings.width=parseInt(this.settings.width),this.settings.height=parseInt(this.settings.height),this.settings.width>=s?this.settings.width=s:this.settings.width<n&&(this.settings.width=n),this.settings.height>=c?this.settings.height=c:this.settings.height<a&&(this.settings.height=a),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.init()}function i(){var e=[],i=[{name:"emotion",symbol:"grinning"},{name:"animal",symbol:"bear"},{name:"food",symbol:"hamburger"},{name:"folderol",symbol:"sunny"},{name:"thing",symbol:"kiss"},{name:"travel",symbol:"rocket"}],o={people:"emotion",symbol:"thing",undefined:"thing"},r={};t.each(t.fn.emojiPicker.emojis,function(t,e){var i=o[e.category]||e.category;r[i]=r[i]||[],r[i].push(e)}),e.push('<div class="emojiPicker">'),e.push("<nav>");for(var n in i)e.push('<div class="tab'+(0==n?" active":"")+'" data-tab="'+i[n].name+'"><div class="emoji emoji-'+i[n].symbol+'"></div></div>');e.push("</nav>");for(var n in i){e.push('<section class="'+i[n].name+(0==n?"":" hidden")+'">');for(var s in r[i[n].name]){var a=r[i[n].name][s];e.push('<div class="emoji emoji-'+a.shortcode+'"></div>')}e.push("</section>")}return e.push("</div>"),e.join("\n")}var o="emojiPicker",r={width:"200",height:"350",position:"bottom",fadeTime:100,iconColor:"black",iconBackgroundColor:"#eee",container:"body",button:!0},n=200,s=600,a=100,c=350,h=50;t.extend(e.prototype,{init:function(){this.active=!1,this.addPickerIcon(),this.createPicker(),this.show(),this.listen()},addPickerIcon:function(){var e=this.$el.outerHeight(),i=e>h?h:e,o=this.$el.width();this.$el.width(o),this.$wrapper=this.$el.wrap("<div class='emojiPickerIconWrap'></div>").parent(),this.settings.button&&(this.$icon=t('<div class="emojiPickerIcon"></div>').height(i).width(i).addClass(this.settings.iconColor).css("backgroundColor",this.settings.iconBackgroundColor),this.$wrapper.append(this.$icon))},createPicker:function(){this.$picker=t(i()).appendTo(t("#emojiskeyboard")).width(this.settings.width).height(this.settings.height).css("z-index",1e4),this.$picker.find("section").height(parseInt(this.settings.height)-40),this.settings.width<240&&this.$picker.find(".emoji").css({width:"1em",height:"1em"})},listen:function(){this.$wrapper.find(".emojiPickerIcon").click(t.proxy(this.iconClicked,this)),this.$picker.find("section div").click(t.proxy(this.emojiClicked,this)),this.$picker.find("nav .tab").click(t.proxy(this.emojiCategoryClicked,this)),this.$picker.click(t.proxy(this.pickerClicked,this)),t(document.body).click(t.proxy(this.clickOutside,this))},updatePosition:function(){var t,e;return"body"===this.settings.container?(t=this.$el.offset().top+this.$el.height(),e=this.$el.offset().left):(t=this.$el.offset().top+this.$el.height(),e=this.$el.offset().left),this.$picker.css({top:t+15,left:e+this.$el.outerWidth()-this.settings.width}),this},show:function(){this.$el.focus(),this.$picker.show(this.settings.fadeTime,"linear",function(){this.active=!0}.bind(this))},iconClicked:function(){this.$picker.is(":hidden")?this.show():this.hide()},emojiCategoryClicked:function(e){var i="";this.$picker.find("nav .tab").removeClass("active"),t(e.target).parent().hasClass("tab")?(i=t(e.target).parent().attr("data-tab"),t(e.target).parent(".tab").addClass("active")):(i=t(e.target).attr("data-tab"),t(e.target).addClass("active")),this.$picker.find("section").addClass("hidden"),this.$picker.find("section."+i).removeClass("hidden")},pickerClicked:function(t){t.stopPropagation()}}),t.fn[o]=function(i){return"string"==typeof i?(this.each(function(){var e=t.data(this,o);switch(i){case"toggle":e.iconClicked()}}),this):(this.each(function(){t.data(this,o)||t.data(this,o,new e(this,i))}),this)},String.fromCodePoint||(String.fromCodePoint=function(){var t,e,i,o,r=[];for(o=0;o<arguments.length;++o)t=arguments[o],e=t-65536,i=t>65535?[55296+(e>>10),56320+(1023&e)]:[t],r.push(String.fromCharCode.apply(null,i));return r.join("")})}(jQuery);