!function(e){function t(t,o){this.element=t,this.$el=e(t),this.settings=e.extend({},n,o),this.$container=e(this.settings.container),this.settings.width=parseInt(this.settings.width),this.settings.height=parseInt(this.settings.height),this.settings.width>=s?this.settings.width=s:this.settings.width<r&&(this.settings.width=r),this.settings.height>=c?this.settings.height=c:this.settings.height<a&&(this.settings.height=a),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.init()}function o(){var t=[],o=[{name:"emotion",symbol:"grinning"},{name:"animal",symbol:"bear"},{name:"food",symbol:"hamburger"},{name:"folderol",symbol:"sunny"},{name:"thing",symbol:"kiss"},{name:"travel",symbol:"rocket"}],i={people:"emotion",symbol:"thing",undefined:"thing"},n={};e.each(e.fn.emojiPicker.emojis,function(e,t){var o=i[t.category]||t.category;n[o]=n[o]||[],n[o].push(t)}),t.push('<div class="emojiPicker">'),t.push("<nav>");for(var r in o)t.push('<div class="tab'+(0==r?" active":"")+'" data-tab="'+o[r].name+'"><div class="emoji emoji-'+o[r].symbol+'"></div></div>');t.push("</nav>");for(var r in o){t.push('<section class="'+o[r].name+(0==r?"":" hidden")+'">');for(var s in n[o[r].name]){var a=n[o[r].name][s];t.push('<div class="emoji emoji-'+a.shortcode+'"></div>')}t.push("</section>")}return t.push("</div>"),t.join("\n")}var i="emojiPicker",n={width:"200",height:"350",position:"bottom",fadeTime:100,iconColor:"black",iconBackgroundColor:"#eee",container:"body",button:!0},r=200,s=600,a=100,c=350,d=50;e.extend(t.prototype,{init:function(){this.active=!1,this.addPickerIcon(),this.createPicker(),this.show(),this.listen()},addPickerIcon:function(){var t=this.$el.outerHeight(),o=t>d?d:t,i=this.$el.width();this.$el.width(i),this.$wrapper=this.$el.wrap("<div class='emojiPickerIconWrap'></div>").parent(),this.settings.button&&(this.$icon=e('<div class="emojiPickerIcon"></div>').height(o).width(o).addClass(this.settings.iconColor).css("backgroundColor",this.settings.iconBackgroundColor),this.$wrapper.append(this.$icon))},createPicker:function(){this.$picker=e(o()).appendTo(e("#emojiskeyboard")).width(this.settings.width).height(this.settings.height).css("z-index",1e4),this.$picker.find("section").height(parseInt(this.settings.height)-40),this.settings.width<240&&this.$picker.find(".emoji").css({width:"1em",height:"1em"})},listen:function(){this.$wrapper.find(".emojiPickerIcon").click(e.proxy(this.iconClicked,this)),this.$picker.find("section div").click(e.proxy(this.emojiClicked,this)),this.$picker.find("nav .tab").click(e.proxy(this.emojiCategoryClicked,this)),this.$picker.click(e.proxy(this.pickerClicked,this)),e(document.body).click(e.proxy(this.clickOutside,this))},updatePosition:function(){var e,t;return"body"===this.settings.container?(e=this.$el.offset().top+this.$el.height(),t=this.$el.offset().left):(e=this.$el.offset().top+this.$el.height(),t=this.$el.offset().left),this.$picker.css({top:e+15,left:t+this.$el.outerWidth()-this.settings.width}),this},show:function(){this.$el.focus(),this.$picker.show(this.settings.fadeTime,"linear",function(){this.active=!0}.bind(this))},iconClicked:function(){this.$picker.is(":hidden")?this.show():this.hide()},emojiCategoryClicked:function(t){var o="";this.$picker.find("nav .tab").removeClass("active"),e(t.target).parent().hasClass("tab")?(o=e(t.target).parent().attr("data-tab"),e(t.target).parent(".tab").addClass("active")):(o=e(t.target).attr("data-tab"),e(t.target).addClass("active")),this.$picker.find("section").addClass("hidden"),this.$picker.find("section."+o).removeClass("hidden")},pickerClicked:function(e){e.stopPropagation()}}),e.fn[i]=function(o){return"string"==typeof o?(this.each(function(){var t=e.data(this,i);switch(o){case"toggle":t.iconClicked()}}),this):(this.each(function(){e.data(this,i)||e.data(this,i,new t(this,o))}),this)},String.fromCodePoint||(String.fromCodePoint=function(){var e,t,o,i,n=[];for(i=0;i<arguments.length;++i)e=arguments[i],t=e-65536,o=e>65535?[55296+(t>>10),56320+(1023&t)]:[e],n.push(String.fromCharCode.apply(null,o));return n.join("")})}(jQuery);