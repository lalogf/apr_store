!function(t){var e,i,n,o,r=!1,s=!r,a=r,c=".pageless",h="scroll"+c,l="resize"+c,d={container:window,currentPage:1,distance:100,pagination:".pagination",params:{},url:location.href,loaderImage:"/images/load.gif"};t.pageless=function(e){t.isFunction(e)?d.call():f(e)};var u=function(){return d.loaderHtml||'\n<div id="pageless-loader" style="display:none;text-align:center;width:100%;">\n  <div class="msg" style="color:#e9e9e9;font-size:2em"></div>\n  <img src="'+d.loaderImage+'" alt="loading more results" style="margin:10px auto" />\n</div>'},f=function(e){d.inited||(d.inited=s,e&&t.extend(d,e),n=d.container,o=t(n),d.pagination&&t(d.pagination).remove(),y())};t.fn.pageless=function(n){var o=t(this),r=t(n.loader,o);f(n),e=o,n.loader&&r.length?i=r:(i=t(u()),o.append(i),n.loaderHtml||t("#pageless-loader .msg").html(n.loaderMsg).css(n.msgStyles||{}))};var p=function(t){(a=t)?i&&i.fadeIn("normal"):i&&i.fadeOut("normal")},g=function(){return n===window?t(document).height()-o.scrollTop()-o.height():o[0].scrollHeight-o.scrollTop()-o.height()},m=function(){o.unbind(c)},y=function(){o.bind(h+" "+l,v).trigger(h)},v=function(){return d.totalPages<=d.currentPage?(m(),void(d.end&&d.end.call())):void(!a&&g()<d.distance&&(p(s),d.currentPage++,t.extend(d.params,{page:d.currentPage}),t.get(d.url,d.params,function(n){t.isFunction(d.scrape)?d.scrape(n):n,i?i.before(n):e.append(n),p(r),d.complete&&d.complete.call()},"html")))}}(jQuery);