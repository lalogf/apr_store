function hoverCase(a,e){$("canvas").mouseover(function(){canvas.setOverlayImage(null,canvas.renderAll.bind(canvas)),canvas.setOverlayImage(e,canvas.renderAll.bind(canvas))}),$("canvas").mouseout(function(){canvas.setOverlayImage(a,canvas.renderAll.bind(canvas)),canvas.deactivateAll().renderAll()})}function toUnicode(a){var e=a.split("-").map(function(a){return parseInt(a,16)});return String.fromCodePoint.apply(null,e)}function findEmoji(a){for(var e=$.fn.emojiPicker.emojis,s=0;s<e.length;s++)if(e[s].shortcode==a)return e[s]}function rgb2hex(a){var e=a.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+)/i);return e&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):a}var canvas,imgElement,imgInstance,butn,cod,line_for_print,caseImage,overIm,preOverIm,imgData,overlay="/assets/cases/i6t.png",overlay_line="/assets/cases/i6t_l.png",ready=function(){if(createCanvas(),$("#product_phonetype_id").change(function(){2==$(this).val()||3==$(this).val()?canvas.setOverlayImage("/assets/cases/i5.png",canvas.renderAll.bind(canvas)):7==$(this).val()?canvas.setOverlayImage("/assets/cases/s5t.png",canvas.renderAll.bind(canvas)):9==$(this).val()?canvas.setOverlayImage("/assets/cases/s6t.png",canvas.renderAll.bind(canvas)):8==$(this).val()?canvas.setOverlayImage("/assets/cases/motog.png",canvas.renderAll.bind(canvas)):4==$(this).val()?canvas.setOverlayImage("/assets/cases/i6.png",canvas.renderAll.bind(canvas)):5==$(this).val()?canvas.setOverlayImage("/assets/cases/i6t.png",canvas.renderAll.bind(canvas)):6==$(this).val()?canvas.setOverlayImage("/assets/cases/i6pt.png",canvas.renderAll.bind(canvas)):1==$(this).val()&&canvas.setOverlayImage("/assets/cases/i4t.png",canvas.renderAll.bind(canvas))}),"admin"!==window.location.pathname.split("/")[1]){$("#phoneTypeDropDown li a").click(function(a){var e=$(a.target).text();$("#dropdownMenu3 p").html(e),"2"===a.target.id?(canvas.setOverlayImage("/assets/cases/i5.png",canvas.renderAll.bind(canvas)),overlay="/assets/cases/i5.png",overlay_line="/assets/cases/i5_l.png",$("#phone_type_name").val("2")):"3"===a.target.id?(canvas.setOverlayImage("/assets/cases/i5t.png",canvas.renderAll.bind(canvas)),overlay="/assets/cases/i5t.png",overlay_line="/assets/cases/i5t_l.png",$("#phone_type_name").val("3")):"7"===a.target.id?(canvas.setOverlayImage("/assets/cases/gs5t.png",canvas.renderAll.bind(canvas)),overlay="/assets/cases/gs5t.png",overlay_line="/assets/cases/gs5t_l.png",$("#phone_type_name").val("7")):"9"===a.target.id?(canvas.setOverlayImage("/assets/cases/gs6t.png",canvas.renderAll.bind(canvas)),overlay="/assets/cases/gs6t.png",overlay_line="/assets/cases/gs6t_l.png",$("#phone_type_name").val("9")):"8"===a.target.id?(canvas.setOverlayImage("/assets/cases/motog.png",canvas.renderAll.bind(canvas)),overlay="/assets/cases/motog.png",overlay_line="/assets/cases/motog_l.png",$("#phone_type_name").val("8")):"4"===a.target.id?(canvas.setOverlayImage("/assets/cases/i6.png",canvas.renderAll.bind(canvas)),overlay="/assets/cases/i6.png",overlay_line="/assets/cases/i6_l.png",$("#phone_type_name").val("4")):"5"===a.target.id?(canvas.setOverlayImage("/assets/cases/i6t.png",canvas.renderAll.bind(canvas)),overlay="/assets/cases/i6t.png",overlay_line="/assets/cases/i6t_l.png",$("#phone_type_name").val("5")):"6"===a.target.id?(canvas.setOverlayImage("/assets/cases/i6pt.png",canvas.renderAll.bind(canvas)),overlay="/assets/cases/i6pt.png",overlay_line="/assets/cases/i6pt_l.png",$("#phone_type_name").val("6")):"1"===a.target.id&&(canvas.setOverlayImage("/assets/cases/i4t.png",canvas.renderAll.bind(canvas)),overlay="/assets/cases/i4t.png",overlay_line="/assets/cases/i4t_l.png",$("#phone_type_name").val("1"))}),$("canvas").mouseover(function(){canvas.setOverlayImage(null,canvas.renderAll.bind(canvas)),canvas.setOverlayImage(overlay_line,canvas.renderAll.bind(canvas))}),$("canvas").mouseout(function(){canvas.setOverlayImage(overlay,canvas.renderAll.bind(canvas)),canvas.deactivateAll().renderAll()}),$(".designtocase").click(function(a){imgData=a.target.src,fabric.Image.fromURL(imgData,function(a){canvas.add(a.set({left:0,top:0})),canvas.controlsAboveOverlay=!0,canvas.item(0).set({borderColor:"black",cornerColor:"black",cornerSize:20,transparentCorners:!1}),canvas.setActiveObject(canvas.item(0))},{crossOrigin:"anonymous"})}),$(".color_button").click(function(){var a=$(this).css("background-color"),e=rgb2hex(a);$("#back_color").attr("value",e),canvas.setBackgroundColor(a,canvas.renderAll.bind(canvas))}),$("#back_color").change(function(){var a=$(this).val();canvas.setBackgroundColor(a,canvas.renderAll.bind(canvas))});var a=$(".tab-content").width();$("#newtext").emojiPicker({height:"300px",width:a}),$("section .emoji").click(function(a){var e=$(a.target).attr("class").split("emoji-")[1],s=toUnicode(findEmoji(e).unicode),n=new fabric.Text(s,{fontSize:"70",top:150,left:250,selectable:!0});canvas.add(n)}),$("#scale-control").change(function(){var a=canvas.getActiveObject();a.scale(parseFloat(this.value)).setCoords(),canvas.renderAll()}),$("#angle-control").change(function(){var a=canvas.getActiveObject();a.setAngle(parseInt(this.value,10)).setCoords(),canvas.renderAll()}),$("#fontSizeDropDown li a").click(function(a){var e=$(a.target).text();$("#dropdownMenu1").html(e).width(40).append("<span class='caret'></span>")}),$("#fontFamilyDropDown li a").click(function(a){var e=$(a.target).text();$("#dropdownMenu2").html(e).width(300).append("<span class='caret'></span>")}),$("#textCreation").click(function(){var a=$("#text_to_canvas").val(),e=$("#dropdownMenu1").html().split("<")[0],s=$("#dropdownMenu2").html().split("<")[0],n=$("#text_color").val(),t=new fabric.IText(a,{fontFamily:s,top:150,left:250,fill:n,fontSize:e});canvas.add(t)}),$("#generar").click(function(){canvas.deactivateAll().renderAll(),$("#picture_url").val(canvas.toDataURL("image/png"))})}else $(".designtocase").click(function(a){imgData=a.target.src,fabric.Image.fromURL(imgData,function(a){canvas.add(a.set({left:0,top:0})),canvas.controlsAboveOverlay=!0,canvas.item(0).set({borderColor:"black",cornerColor:"black",cornerSize:20,transparentCorners:!1}),canvas.setActiveObject(canvas.item(0))},{crossOrigin:"anonymous"})}),$("#create").click(function(){canvas.deactivateAll().renderAll(),$("#newcaseimage").val(canvas.toDataURL("image/png"))})},createCanvas=function(){canvas=new fabric.Canvas("c"),canvas.setHeight(600),canvas.setWidth(600),canvas.setOverlayImage("/assets/cases/i6t.png",canvas.renderAll.bind(canvas))},createImage=function(a){imgElement=$(".designtocase")[a],imgInstance=new fabric.Image(imgElement,{left:0,top:0},{crossOrigin:"Anonymous"})};$(document).ready(ready),$(document).on("page:load",ready);